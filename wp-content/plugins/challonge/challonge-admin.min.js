jQuery(document).ready(function(e){var a=null;e("#challonge-apikey").on("keyup mouseup change",function(){var n=e(this).val();n!==a&&(a=n,e("#challonge-apikey-check, #challonge-apikey-ok, #challonge-apikey-fail, #challonge-apikey-error").stop(!0,!0).hide(),e("#challonge-apikey-errmsg").html(""),n.match(/^[a-z0-9]{40}$/i)?(e("#challonge-apikey-check").fadeIn("fast"),e.getJSON(ajaxurl,{action:"challonge_verify_apikey",api_key:n},function(a,n){e("#challonge-apikey-check").fadeOut("fast",function(){a.errors&&"Invalid API key"==a.errors[0][0]?e("#challonge-apikey-fail").fadeIn("fast"):a.errors&&"Result set empty"==a.errors[0]?e("#challonge-apikey-ok").fadeIn("fast"):(e("#challonge-apikey-errmsg").html(a.errors[0]),e("#challonge-apikey-error").fadeIn("fast"))})}).fail(function(){e("#challonge-apikey-check").fadeOut("fast",function(){e("#challonge-apikey-errmsg").html(challongeVar.errorMsg),e("#challonge-apikey-error").fadeIn("fast")})})):n&&e("#challonge-apikey-fail").fadeIn("fast"))}).change(),e("#challonge-participant_name-showtokens").one("click",function(a){e(this).slideUp("fast"),e("#challonge-participant_name-tokens").slideDown("slow"),a.preventDefault()}),e("#challonge-participant_name-showusermetatokens").one("click",function(a){e(this).parent().fadeOut("fast"),e("#challonge-participant_name-usermetatokens").slideDown("slow"),a.preventDefault()}),e("#challonge-participant_name-tokens-users").change(function(){var a=e(this).find("option:selected").data("userdata");e("#challonge-participant_name-tokens table tr td.token").each(function(){var n=e(this).text().split("%").join("");e(this).nextAll("td.userdata").text(a[n])})}).change(),e("#challonge-donate-hide").one("click",function(a){e("#challonge-donate").fadeOut(),a.preventDefault()});var n=e("#challonge-headers_shortcode-list");n.sortable({handle:".challonge-handle"});n.on("focus",".challonge-headers_shortcode-handle",function(){var a=e(this),n=e(this).closest("li");a.one("keydown",function(e){var l=e.keyCode?e.keyCode:e.which;40==l?(e.preventDefault(),n.next().after(n),a.focus()):38==l&&(e.preventDefault(),n.prev().before(n),a.focus())})}).on("blur",".challonge-headers_shortcode-handle",function(){e(this).unbind("keydown")}).on("click",".challonge-headers_shortcode-togglevis",function(){var a=e(this).closest("li"),n=a.find("input[type=hidden]"),l=JSON.parse(n.val());l.hasOwnProperty("show")&&(l.show=a.hasClass("challonge-hide"),a.addClass(l.show?"challonge-show":"challonge-hide").removeClass(l.show?"challonge-hide":"challonge-show"),n.val(JSON.stringify(l)))}),n.find("li").each(function(){var a=e(this).find(".challonge-headers_shortcode-editform").dialog({autoOpen:!1,width:350,height:250,modal:!0,buttons:{Done:function(){var n=a.find("fieldset"),l=e("#challonge-headers_shortcode-"+a.data("prop")),o=JSON.parse(l.val());l.val(JSON.stringify(e.extend(o,{alias:n.find('input[id$="-alias"]').val(),format:n.find('select[id$="-format"]').val()}))),l.closest("li").find(".challonge-headers_shortcode-label").text(o.alias?o.alias:o.name),a.dialog("close")},Cancel:function(){var n=a.find("fieldset"),l=e("#challonge-headers_shortcode-"+a.data("prop")),o=JSON.parse(l.val());n.find('input[id$="-alias"]').val(o.alias),n.find('select[id$="-format"]').val(o.format),a.dialog("close")}},close:function(){}});e(this).find(".challonge-headers_shortcode-edit").click(function(e){a.dialog("open")})})});