jQuery(document).ready(function(e){if(e(document).on("click",".challonge-lnkconfirm .challonge-button",function(a){var n,t,o,l,r,i,c,s;if(a.preventDefault(),n=e(this),t=n.parent(),o=n.data("lnkaction"),l=n.data("lnktourny"),params={action:"challonge_widget",lnk_action:o,lnk_tourny:l},"report"==o){i=(r=e("#challonge-report")).serializeArray();for(s in i)switch(i[s].name){case"challonge_report_wl":params.report_wl=i[s].value;break;case"challonge_report_score":params.report_score=i[s].value;break;case"challonge_report_opponent_score":params.report_opponent_score=i[s].value}if(void 0===params.report_wl)return void alert(challongeVar.wltMsg);r.find("input").prop("disabled",!0)}else"join"==o&&(params.playername_input=[],e(".challonge-playername").find("input").each(function(){params.playername_input.push(e(this).val())}).prop("disabled",!0));t.hide().html('<img src="'+challongeVar.spinUrl+'" />').fadeIn("slow"),e.post(challongeVar.ajaxUrl,params,function(a,n){t.finish().hide().html(a).fadeIn("slow",function(){(c=e(this).find(".challonge-metahtml")).length&&e(".challonge-button.challonge-tournyid-"+l).replaceWith(c.html())})}).fail(function(){t.finish().hide().html('<p class="challonge-error">'+challongeVar.errorMsg+' -- <a href="#close" onclick="tb_remove();return false;">'+challongeVar.closeMsg+"</a></p>").fadeIn("slow")})}).on("submit","#challonge-loginform",function(a){var n=e(this).find('input[name="redirect_to"]'),t=n.val().indexOf("challonge_signup=");n.val(window.location.href+(-1==window.location.href.indexOf("?")?"?":"&")+n.val().substr(t))}),-1!=window.location.search.indexOf("challonge_signup=")){var a=window.location.search.indexOf("challonge_signup="),n=window.location.search.substr(a+17);-1!=n.indexOf("&")&&(n=n.substr(0,n.indexOf("&"))),setTimeout("Challonge_jQuery('.challonge-button.thickbox.challonge-tournyid-"+n+"').get(0).click();",1e3)}var t=function(){var a=e(this),n=a.width()-80,t=a.height()-80,o=/(\?action=challonge_widget&width)=\d+(&height)=\d+\b(.*&lnk_action=view)$/;e("a.thickbox").each(function(){var a=e(this),l=a.attr("href"),r=l.replace(o,"$1="+n+"$2="+t+"$3");l!=r&&a.attr("href",r)})};e(window).resize(t),setTimeout(t,10);var o=function(){},l=new Date((new Date).getTime()+108e5),r=function(a){var n=e(this),t=new Date(n.attr("data-expires")),r=new Date;isNaN(t)||(n.addClass("challonge-refresh").attr("tab-index","0").append('<span class="challonge-freshness-hover">'+challongeVar.rfNowMsg+"</span>").mouseleave(o),t>r&&l>r?setTimeout(function(){n.trigger("click")},Math.max(1e4,t-r)):"number"==typeof a&&t<=r&&n.trigger("click"),o(500))};e(document).on("click",".challonge-freshness",function(a){var n,t=e(a.target).closest(".challonge-freshness"),o=t.parents(".challonge-shortcode-content, .challonge-widget-content").first(),l=new Date(t.attr("datetime")),i=new Date(t.attr("data-expires"));if(!isNaN(l)&&!isNaN(i)&&o.length&&(n={action:"challonge_widget",type:null,refresh:null},o.is(".challonge-widget-content")&&t.attr("data-widgetid")?(n.type="widget",n.refresh=t.attr("data-widgetid")):o.is(".challonge-shortcode-content")&&t.attr("data-atts")&&(n.type="shortcode",n.refresh=t.attr("data-atts")),null!==n.type)){var c=!!a.originalEvent,s=c?"fast":0;c&&o.fadeTo("fast",.7),t.addClass("challonge-refreshing").text(challongeVar.rfingMsg),e.post(challongeVar.ajaxUrl,n,function(a,n){o.stop(!0,!0).fadeTo(s,0,function(){var n=e(a);e(this).replaceWith(n),n.fadeTo(0,0).fadeTo(s,1,function(){var e=n.find(".challonge-freshness");r.call(e.get(0))})})})}}),e(".challonge-freshness").each(r),function(a){if("function"==typeof a&&a()instanceof a){challongeVar.wpLocale&&a.locale(challongeVar.wpLocale);var n=null;(o=function(t){clearTimeout(n);var l=e(".challonge-freshness:not(.challonge-hide-freshness)");if(l.length>0){if("number"==typeof t&&t>0)return void(n=setTimeout(o,t));l.each(function(){var n=e(this),t=new Date(n.attr("datetime"));isNaN(t)||n.is(".challonge-refreshing")||(n.contents().get(0).nodeValue=a(t).fromNow())}),o(3e4)}})()}}(moment)});var Challonge_jQuery=jQuery;